# ================================================
# SHADOW CLONE SKILLS - Advanced AI Dodge System (Bug Fixed)
# ================================================
# ‡πÉ‡∏™‡πà‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ô: plugins/MythicMobs/Skills/ShadowCloneSkills.yml
# Version: 1.5 - Smart Directional Dodge (Fixed)
# Required: MythicMobs 5.3+ (Free ‡∏´‡∏£‡∏∑‡∏≠ Premium)

# ================================
# MAIN ACTIVATION SKILL
# ================================
ShadowClone_Activate:
  Cooldown: 60
  Skills:
  - message{m="&8&l‚öî &7‡πÄ‡∏£‡∏µ‡∏¢‡∏Å&8‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤&7‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏£‡∏ö!"} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.4} @self
  - effect:particles{p=large_smoke;a=40;s=0.6} @self
  - effect:particles{p=portal;a=50;s=0.8} @self
  - delay 5
  - skill{s=ShadowClone_SummonSmart} @self

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò
ShadowClone_SummonSmart:
  Skills:
  - setvariable{var=scope.caster.clone_spawned;val=0;type=INTEGER}
  # Bows
  - skill{s=ShadowClone_SpawnArcher} @self ?wearing{slot=hand;m=BOW} ?varequals{var=scope.caster.clone_spawned;val=0}
  - skill{s=ShadowClone_SpawnArcher} @self ?wearing{slot=hand;m=CROSSBOW} ?varequals{var=scope.caster.clone_spawned;val=0}
  # Swords
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=DIAMOND_SWORD} ?varequals{var=scope.caster.clone_spawned;val=0}
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=NETHERITE_SWORD} ?varequals{var=scope.caster.clone_spawned;val=0}
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=IRON_SWORD} ?varequals{var=scope.caster.clone_spawned;val=0}
  # Axes
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=DIAMOND_AXE} ?varequals{var=scope.caster.clone_spawned;val=0}
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=NETHERITE_AXE} ?varequals{var=scope.caster.clone_spawned;val=0}
  # Default
  - skill{s=ShadowClone_SpawnDefault} @self ?varequals{var=scope.caster.clone_spawned;val=0}

ShadowClone_SpawnArcher:
  Skills:
  - summon{t=ShadowClone_Archer;a=1;r=2} @self
  - setvariable{var=scope.caster.clone_spawned;val=1;type=INTEGER}

ShadowClone_SpawnMelee:
  Skills:
  - summon{t=ShadowClone_Melee;a=1;r=2} @self
  - setvariable{var=scope.caster.clone_spawned;val=1;type=INTEGER}

ShadowClone_SpawnDefault:
  Skills:
  - summon{t=ShadowClone;a=1;r=2} @self
  - setvariable{var=scope.caster.clone_spawned;val=1;type=INTEGER}


# ================================
# SPAWN EFFECTS
# ================================
ShadowClone_Spawn:
  Skills:
  # Owner tracking
  - setvariable{var=mob.owner_uuid;val=<caster.uuid>;type=STRING} @self
  - setvariable{var=mob.owner_name;val=<caster.name>;type=STRING} @self
  
  # ========================================
  # DISGUISE - Copy Player Appearance
  # ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á LibsDisguises plugin!
  # ========================================
  - disguise{d="player <caster.name>"} @self
  
  # Effects
  - effect:particles{p=large_smoke;a=30;s=0.4} @self
  - effect:particles{p=portal;a=40;s=0.6} @self
  - effect:sound{s=entity.enderman.teleport;v=0.8;p=0.6} @self
  - delay 5
  - message{m="&8&l‚öî &7‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏ö!"} @owner
  # Despawn timer (20 seconds = 400 ticks)
  - skill{s=ShadowClone_SetDespawnTimer} @self

ShadowClone_SetDespawnTimer:
  Skills:
  - delay 400
  - skill{s=ShadowClone_Expire} @self


# ================================
# SMART DODGE SYSTEM - AI ‡∏â‡∏•‡∏≤‡∏î! (FIXED)
# ================================
# Main Dodge - ‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏ö (‡πÉ‡∏ä‡πâ randomskill ‡πÅ‡∏ó‡∏ô)
ShadowClone_Dodge:
  Cooldown: 0.5
  Skills:
  - cancelevent
  # ‡πÉ‡∏ä‡πâ randomskill ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
  - randomskill{skills=ShadowClone_DodgeLeft,ShadowClone_DodgeRight,ShadowClone_DodgeBack}

# ‡∏´‡∏•‡∏ö‡∏ã‡πâ‡∏≤‡∏¢ - Side Step Left
ShadowClone_DodgeLeft:
  Skills:
  - effect:particles{p=large_smoke;a=12;s=0.2} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=1.6} @self
  - velocity{m=set;x=-0.7;y=0.2;z=0;relative=true} @self
  - effect:particles{p=crit;a=6;s=0.15} @self
  - actionmessage{m="&b&l‚óÄ DODGE LEFT!"} @owner

# ‡∏´‡∏•‡∏ö‡∏Ç‡∏ß‡∏≤ - Side Step Right
ShadowClone_DodgeRight:
  Skills:
  - effect:particles{p=large_smoke;a=12;s=0.2} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=1.6} @self
  - velocity{m=set;x=0.7;y=0.2;z=0;relative=true} @self
  - effect:particles{p=crit;a=6;s=0.15} @self
  - actionmessage{m="&b&l‚ñ∂ DODGE RIGHT!"} @owner

# ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á - Backstep
ShadowClone_DodgeBack:
  Skills:
  - effect:particles{p=large_smoke;a=15;s=0.25} @self
  - effect:sound{s=entity.enderman.teleport;v=0.6;p=1.4} @self
  - velocity{m=set;x=0;y=0.3;z=-0.8;relative=true} @self
  - effect:particles{p=crit;a=8;s=0.2} @self
  - actionmessage{m="&e&l‚ñº BACKSTEP!"} @owner


# ================================
# ADVANCED DODGE - Archer Backflip
# ================================
ShadowClone_Backflip:
  Cooldown: 1
  Skills:
  - cancelevent
  - effect:particles{p=large_smoke;a=20;s=0.3} @self
  - effect:sound{s=entity.enderman.teleport;v=0.7;p=1.2} @self
  - velocity{m=set;x=0;y=0.6;z=-1.0;relative=true} @self
  - actionmessage{m="&d&l‚Üª BACKFLIP!"} @owner
  - delay 8
  # ‡∏¢‡∏¥‡∏á‡∏ï‡∏≠‡∏ö‡πÇ‡∏ï‡πâ - ‡πÉ‡∏ä‡πâ @target ‡πÅ‡∏ó‡∏ô @trigger
  - skill{s=ShadowClone_ArrowShot} @target ?!isowner


# ================================
# MELEE DODGE - Shield Block + Counter (FIXED)
# ================================
ShadowClone_Block:
  Cooldown: 0.5
  Skills:
  - cancelevent
  - effect:sound{s=item.shield.block;v=0.8;p=1} @self
  - effect:particles{p=crit;a=8;s=0.15} @self
  - actionmessage{m="&7&lüõ° BLOCK!"} @owner
  # 40% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÇ‡∏ï‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏á Block - ‡πÉ‡∏ä‡πâ @target ‡πÅ‡∏ó‡∏ô @trigger
  - skill{s=ShadowClone_CounterAttack} @target 0.4

# Counter Attack ‡∏´‡∏•‡∏±‡∏á Block (FIXED)
ShadowClone_CounterAttack:
  Conditions:
  - "!isowner"
  Skills:
  - delay 3
  - effect:particles{p=sweep_attack;a=1} @self
  - effect:sound{s=entity.player.attack.crit;v=0.7;p=1.2} @self
  - damage{a=12;pkb=true} @target
  - actionmessage{m="&c&l‚öî COUNTER!"} @owner


# ================================
# PARRY SYSTEM - ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ (FIXED)
# ================================
ShadowClone_Parry:
  Cooldown: 2
  Skills:
  - cancelevent
  - effect:sound{s=entity.iron_golem.damage;v=0.6;p=1.5} @self
  - effect:particles{p=enchanted_hit;a=15;s=0.3} @self
  - actionmessage{m="&6&l‚öî PARRY!"} @owner
  # Parry ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à = debuff attacker - ‡πÉ‡∏ä‡πâ @target
  - potion{t=SLOWNESS;d=20;l=3} @target
  - potion{t=WEAKNESS;d=20;l=1} @target
  - delay 5
  - skill{s=ShadowClone_HeavySlash} @target ?!isowner


# ================================
# SMART ATTACK
# ================================
ShadowClone_SmartAttack:
  Cooldown: 0.5
  Conditions:
  - "!isowner"
  Skills:
  - skill{s=ShadowClone_ArrowShot} @target ?distance{d=>8}
  - skill{s=ShadowClone_MeleeCombo} @target ?distance{d=<8}


# ================================
# MELEE COMBAT
# ================================
ShadowClone_MeleeCombo:
  Cooldown: 0.8
  Conditions:
  - "!isowner"
  Skills:
  - damage{a=8;pkb=true} @target
  - effect:particles{p=sweep_attack;a=1} @self
  - effect:sound{s=entity.player.attack.sweep;v=0.7;p=1} @self
  - delay 8
  - skill{s=ShadowClone_HeavySlash} @target 0.3

ShadowClone_HeavySlash:
  Conditions:
  - "!isowner"
  Skills:
  - effect:particles{p=crit;a=15;s=0.25} @target
  - effect:sound{s=entity.player.attack.crit;v=0.8;p=0.8} @self
  - damage{a=15;pkb=true} @target
  - throw{v=0.4;vy=0.25} @target


# ================================
# RANGED COMBAT
# ================================
ShadowClone_ArrowShot:
  Cooldown: 1
  Conditions:
  - "!isowner"
  Skills:
  - effect:sound{s=entity.arrow.shoot;v=0.8;p=1} @self
  - projectile{onTick=ShadowClone_ArrowTick;onHit=ShadowClone_ArrowHit;type=ARROW;velocity=2.8;interval=2;maxduration=40;gravity=0.05} @target

ShadowClone_ArrowTick:
  Skills:
  - effect:particles{p=crit;a=1;s=0.08} @origin

ShadowClone_ArrowHit:
  Conditions:
  - "!isowner"
  Skills:
  - damage{a=10} @target
  - effect:particles{p=crit;a=8;s=0.25} @target
  - effect:sound{s=entity.arrow.hit_player;v=0.8;p=1} @target


# ================================
# FOLLOW OWNER
# ================================
ShadowClone_FollowOwner:
  Cooldown: 2
  TargetConditions:
  - distance{d=>12} @owner
  Skills:
  - effect:particles{p=portal;a=10;s=0.25} @self
  - delay 2
  - teleport @owner
  - effect:particles{p=large_smoke;a=12;s=0.3} @self


# ================================
# EXPIRE & DEATH
# ================================
ShadowClone_Expire:
  Skills:
  - message{m="&8&l‚öî &7‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤&8‡∏´‡∏≤‡∏¢‡πÑ‡∏õ&7‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∑‡∏î..."} @owner
  - effect:particles{p=large_smoke;a=50;s=0.6} @self
  - effect:particles{p=portal;a=30;s=0.4} @self
  - effect:sound{s=entity.enderman.teleport;v=0.8;p=0.3} @self
  - delay 3
  - remove @self

ShadowClone_Death:
  Skills:
  - message{m="&8&l‚öî &c‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢!"} @owner
  - effect:particles{p=large_smoke;a=60;s=0.8} @self
  - effect:particles{p=soul;a=15;s=0.4} @self
  - effect:sound{s=entity.wither.hurt;v=0.6;p=1.5} @self


# ================================
# CHECK OWNER ONLINE - ‡∏•‡∏ö Clone ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Owner ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°
# ================================
ShadowClone_CheckOwnerOnline:
  Conditions:
  # ‡∏ñ‡πâ‡∏≤ Owner ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ 500 blocks = ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß
  - distance{d=>500} @owner
  Skills:
  # Owner ‡∏´‡∏•‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß - ‡∏•‡∏ö Clone
  - effect:particles{p=large_smoke;a=40;s=0.5} @self
  - effect:particles{p=soul;a=20;s=0.4} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=0.5} @self
  - remove @self

# ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ‡∏ñ‡πâ‡∏≤ Owner ‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ MythicMobs Premium)
ShadowClone_CheckOwnerOffline:
  Conditions:
  - playernotwithin{r=1000}
  Skills:
  - remove @self
