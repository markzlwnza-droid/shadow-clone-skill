# ================================================
# SHADOW CLONE SKILLS - Advanced AI Dodge System v2.3
# ================================================
# ‡πÉ‡∏™‡πà‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ô: plugins/MythicMobs/Skills/ShadowCloneSkills.yml
# Version: 2.3 - Fixed for MythicMobs FREE (variable scope fix)
# Required: MythicMobs 5.3+ (Free ‡∏´‡∏£‡∏∑‡∏≠ Premium)

# ================================
# MAIN ACTIVATION SKILL
# ================================
ShadowClone_Activate:
  Cooldown: 60
  Skills:
  # ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠
  - 'message{m="<&8><&l>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"} @self'
  - 'message{m="<&8><&l>‚öî <&7>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å<&8>‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤<&7>‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏£‡∏ö!"} @self'
  - 'message{m=""} @self'
  - 'message{m="<&e><&l>üìã ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤:"} @self'
  - 'message{m="  <&8>‚Ä¢ <&a>‚óÄ‚ñ∂ <&7>‡∏´‡∏•‡∏ö‡∏´‡∏•‡∏µ‡∏Å ‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤/‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á"} @self'
  - 'message{m="  <&8>‚Ä¢ <&c>‚öî <&7>‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"} @self'
  - 'message{m="  <&8>‚Ä¢ <&d>üõ° <&7>Parry <&7>Block ‡πÇ‡∏ï‡πâ‡∏Å‡∏•‡∏±‡∏ö"} @self'
  - 'message{m="  <&8>‚Ä¢ <&b>‚ÜØ <&7>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á"} @self'
  - 'message{m="  <&8>‚Ä¢ <&5>‚ö° <&7>Ultimate Skills"} @self'
  - 'message{m=""} @self'
  - 'message{m="<&6><&l>üéÆ ‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ö:"} @self'
  - 'message{m="  <&8>‚Ä¢ <&c>‚öî Aggressive <&8>- <&7>‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏à‡∏°‡∏ï‡∏µ"} @self'
  - 'message{m="  <&8>‚Ä¢ <&b>üõ° Defensive <&8>- <&7>‡πÄ‡∏ô‡πâ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"} @self'
  - 'message{m="  <&8>‚Ä¢ <&a>üíö Support <&8>- <&7>‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ Owner"} @self'
  - 'message{m=""} @self'
  - 'message{m="<&c><&l>‚è± <&7>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: <&e>20 <&7>‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ"} @self'
  - 'message{m="<&8><&l>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"} @self'
  # Effects
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.4} @self
  - effect:particles{p=large_smoke;a=40;s=0.6} @self
  - effect:particles{p=portal;a=50;s=0.8} @self
  - delay 5
  - skill{s=ShadowClone_SummonSmart} @self

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò
ShadowClone_SummonSmart:
  Skills:
  # Bows
  - skill{s=ShadowClone_SpawnArcher} @self ?wearing{slot=hand;m=BOW}
  - skill{s=ShadowClone_SpawnArcher} @self ?wearing{slot=hand;m=CROSSBOW}
  # Swords
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=DIAMOND_SWORD}
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=NETHERITE_SWORD}
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=IRON_SWORD}
  # Axes
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=DIAMOND_AXE}
  - skill{s=ShadowClone_SpawnMelee} @self ?wearing{slot=hand;m=NETHERITE_AXE}
  # Default - summon if nothing else matched
  - skill{s=ShadowClone_SpawnDefault} @self

ShadowClone_SpawnArcher:
  Skills:
  - summon{t=ShadowClone_Archer;a=1;r=2} @self

ShadowClone_SpawnMelee:
  Skills:
  - summon{t=ShadowClone_Melee;a=1;r=2} @self

ShadowClone_SpawnDefault:
  Skills:
  - summon{t=ShadowClone;a=1;r=2} @self

# ================================
# SPAWN EFFECTS
# ================================
ShadowClone_Spawn:
  Skills:
  # DISGUISE - Copy Player Appearance (‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á LibsDisguises plugin!)
  - disguise{d="player <caster.name>"} @self
  
  # Effects
  - effect:particles{p=large_smoke;a=30;s=0.4} @self
  - effect:particles{p=portal;a=40;s=0.6} @self
  - effect:sound{s=entity.enderman.teleport;v=0.8;p=0.6} @self
  - delay 5
  - 'message{m="<&8><&l>‚öî <&7>‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏ö! <&8>[<&c>AGGRESSIVE<&8>]"} @owner'
  - 'actionmessage{m="<&8>[<&7>Clone <&a>‚úì<&8>] <&c>Aggressive Mode"} @owner'
  # Despawn timer (20 seconds = 400 ticks)
  - skill{s=ShadowClone_SetDespawnTimer} @self

ShadowClone_SetDespawnTimer:
  Skills:
  - delay 400
  - skill{s=ShadowClone_Expire} @self


# ================================
# SMART DODGE SYSTEM - AI ‡∏â‡∏•‡∏≤‡∏î!
# ================================
# Main Dodge - ‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏ö
ShadowClone_Dodge:
  Cooldown: 0.5
  Skills:
  - cancelevent
  - randomskill{skills=ShadowClone_DodgeLeft,ShadowClone_DodgeRight,ShadowClone_DodgeBack}

# ‡∏´‡∏•‡∏ö‡∏ã‡πâ‡∏≤‡∏¢ - Side Step Left
ShadowClone_DodgeLeft:
  Skills:
  - effect:particles{p=large_smoke;a=12;s=0.2} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=1.6} @self
  - velocity{m=set;x=-0.7;y=0.2;z=0;relative=true} @self
  - effect:particles{p=crit;a=6;s=0.15} @self
  - 'actionmessage{m="<&b><&l>‚óÄ DODGE LEFT!"} @owner'

# ‡∏´‡∏•‡∏ö‡∏Ç‡∏ß‡∏≤ - Side Step Right
ShadowClone_DodgeRight:
  Skills:
  - effect:particles{p=large_smoke;a=12;s=0.2} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=1.6} @self
  - velocity{m=set;x=0.7;y=0.2;z=0;relative=true} @self
  - effect:particles{p=crit;a=6;s=0.15} @self
  - 'actionmessage{m="<&b><&l>‚ñ∂ DODGE RIGHT!"} @owner'

# ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á - Backstep
ShadowClone_DodgeBack:
  Skills:
  - effect:particles{p=large_smoke;a=15;s=0.25} @self
  - effect:sound{s=entity.enderman.teleport;v=0.6;p=1.4} @self
  - velocity{m=set;x=0;y=0.3;z=-0.8;relative=true} @self
  - effect:particles{p=crit;a=8;s=0.2} @self
  - 'actionmessage{m="<&e><&l>‚ñº BACKSTEP!"} @owner'


# ================================
# ADVANCED DODGE - Archer Backflip
# ================================
ShadowClone_Backflip:
  Cooldown: 1
  Skills:
  - cancelevent
  - effect:particles{p=large_smoke;a=20;s=0.3} @self
  - effect:sound{s=entity.enderman.teleport;v=0.7;p=1.2} @self
  - velocity{m=set;x=0;y=0.6;z=-1.0;relative=true} @self
  - 'actionmessage{m="<&d><&l>‚Üª BACKFLIP!"} @owner'
  - delay 8
  - skill{s=ShadowClone_ArrowShot} @target


# ================================
# MELEE DODGE - Shield Block + Counter
# ================================
ShadowClone_Block:
  Cooldown: 0.5
  Skills:
  - cancelevent
  - effect:sound{s=item.shield.block;v=0.8;p=1} @self
  - effect:particles{p=crit;a=8;s=0.15} @self
  - 'actionmessage{m="<&7><&l>üõ° BLOCK!"} @owner'
  # 40% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÇ‡∏ï‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏á Block
  - skill{s=ShadowClone_CounterAttack} @target 0.4

# Counter Attack ‡∏´‡∏•‡∏±‡∏á Block
ShadowClone_CounterAttack:
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - delay 3
  - effect:particles{p=sweep_attack;a=1} @self
  - effect:sound{s=entity.player.attack.crit;v=0.7;p=1.2} @self
  - damage{a=12;pkb=true} @target
  - 'actionmessage{m="<&c><&l>‚öî COUNTER!"} @owner'


# ================================
# PARRY SYSTEM - ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
# ================================
ShadowClone_Parry:
  Cooldown: 2
  Skills:
  - cancelevent
  - effect:sound{s=entity.iron_golem.damage;v=0.6;p=1.5} @self
  - effect:particles{p=enchanted_hit;a=15;s=0.3} @self
  - 'actionmessage{m="<&6><&l>‚öî PARRY!"} @owner'
  # Parry ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à = debuff attacker
  - potion{t=SLOWNESS;d=20;l=3} @target
  - potion{t=WEAKNESS;d=20;l=1} @target
  - delay 5
  - skill{s=ShadowClone_HeavySlash} @target


# ================================
# SMART ATTACK
# ================================
ShadowClone_SmartAttack:
  Cooldown: 0.5
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - skill{s=ShadowClone_ArrowShot} @target ?distance{d=>8}
  - skill{s=ShadowClone_MeleeCombo} @target ?distance{d=<8}


# ================================
# MELEE COMBAT
# ================================
ShadowClone_MeleeCombo:
  Cooldown: 0.8
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - damage{a=8;pkb=true} @target
  - effect:particles{p=sweep_attack;a=1} @self
  - effect:sound{s=entity.player.attack.sweep;v=0.7;p=1} @self
  - delay 8
  - skill{s=ShadowClone_HeavySlash} @target 0.3

ShadowClone_HeavySlash:
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - effect:particles{p=crit;a=15;s=0.25} @target
  - effect:sound{s=entity.player.attack.crit;v=0.8;p=0.8} @self
  - damage{a=15;pkb=true} @target
  - throw{v=0.4;vy=0.25} @target


# ================================
# RANGED COMBAT - FIXED for Free/Premium
# ================================
ShadowClone_ArrowShot:
  Cooldown: 1
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - effect:sound{s=entity.arrow.shoot;v=0.8;p=1} @self
  - shoot{type=ARROW;velocity=2.8;damage=10} @target

ShadowClone_ArrowTick:
  Skills:
  - effect:particles{p=crit;a=1;s=0.08} @origin

ShadowClone_ArrowHit:
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - damage{a=10} @target
  - effect:particles{p=crit;a=8;s=0.25} @target
  - effect:sound{s=entity.arrow.hit_player;v=0.8;p=1} @target


# ================================
# FOLLOW OWNER (Primary: AI Goal, Backup: Skill)
# ================================
# ‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏ö‡∏•‡πá‡∏≠‡∏Å
ShadowClone_FollowOwner:
  Cooldown: 1
  TargetConditions:
  - distance{d=>5} @owner
  Skills:
  - goto{t=@owner;s=0.35} @self

# Teleport ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡πÄ‡∏Å‡∏¥‡∏ô 20 ‡∏ö‡∏•‡πá‡∏≠‡∏Å
ShadowClone_FollowOwner_Teleport:
  Cooldown: 3
  TargetConditions:
  - distance{d=>20} @owner
  Skills:
  - effect:particles{p=portal;a=15;s=0.3} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=1.2} @self
  - delay 3
  - teleport @owner
  - effect:particles{p=large_smoke;a=12;s=0.3} @self
  - 'actionmessage{m="<&b>‚ÜØ <&7>Clone teleported to you!"} @owner'


# ================================
# EXPIRE AND DEATH
# ================================
ShadowClone_Expire:
  Skills:
  - 'message{m="<&8><&l>‚öî <&7>‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤<&8>‡∏´‡∏≤‡∏¢‡πÑ‡∏õ<&7>‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∑‡∏î..."} @owner'
  - effect:particles{p=large_smoke;a=50;s=0.6} @self
  - effect:particles{p=portal;a=30;s=0.4} @self
  - effect:sound{s=entity.enderman.teleport;v=0.8;p=0.3} @self
  - delay 3
  - remove @self

ShadowClone_Death:
  Skills:
  - 'message{m="<&8><&l>‚öî <&c>‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏á‡∏≤‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢!"} @owner'
  - effect:particles{p=large_smoke;a=60;s=0.8} @self
  - effect:particles{p=soul;a=15;s=0.4} @self
  - effect:sound{s=entity.wither.hurt;v=0.6;p=1.5} @self


# ================================
# CHECK OWNER ONLINE
# ================================
ShadowClone_CheckOwnerOnline:
  Conditions:
  - distance{d=>500} @owner
  Skills:
  - effect:particles{p=large_smoke;a=40;s=0.5} @self
  - effect:particles{p=soul;a=20;s=0.4} @self
  - effect:sound{s=entity.enderman.teleport;v=0.5;p=0.5} @self
  - remove @self


# ================================
# STATUS DISPLAY
# ================================
ShadowClone_StatusDisplay:
  Skills:
  - 'actionmessage{m="<&8>[<&7>Clone <&c><caster.hp><&8>/<&c><caster.mhp> <&8>| <&6>Active<&8>]"} @owner'


# ================================
# SHADOW AURA
# ================================
ShadowClone_ShadowAura:
  Skills:
  - effect:particles{p=smoke;a=3;s=0.4} @self
  - effect:particles{p=soul;a=1;s=0.3} @self


# ================================
# COMBO SYSTEM
# ================================
ShadowClone_ComboFinisher:
  TargetConditions:
  - entitytype MONSTER
  Skills:
  - effect:particles{p=sweep_attack;a=5;s=1} @self
  - effect:particles{p=crit;a=20;s=0.4} @target
  - effect:sound{s=entity.player.attack.crit;v=0.9;p=0.7} @self
  - damage{a=20;pkb=true;ignorearmor=true} @target
  - throw{v=0.6;vy=0.4} @target
  - 'actionmessage{m="<&c><&l>‚öî COMBO FINISHER!"} @owner'


# ================================
# CLONE RECALL
# ================================
ShadowClone_Recall:
  Skills:
  - effect:particles{p=portal;a=20;s=0.4} @self
  - effect:sound{s=entity.enderman.teleport;v=0.6;p=1.2} @self
  - teleport @owner
  - effect:particles{p=large_smoke;a=15;s=0.3} @self
  - 'actionmessage{m="<&a>‚úì <&7>Clone recalled!"} @owner'


# ================================
# MODE COMMANDS
# ================================
~onSignal:aggressive:
  Skills:
  - skill{s=ShadowClone_SetMode_Aggressive} @self

~onSignal:defensive:
  Skills:
  - skill{s=ShadowClone_SetMode_Defensive} @self

~onSignal:support:
  Skills:
  - skill{s=ShadowClone_SetMode_Support} @self
